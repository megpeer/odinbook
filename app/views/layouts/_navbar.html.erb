<div class="min-w-screen flex justify-between bg-(--color-background)">
    <div class="flex">
        <div>
        <div class="font-bold m-2 justify-center"> OdinBook</div>
            <%# ------ searchbar ------%>
            <div class="relative">
                <%= form_with(url: profile_index_path, 
                            method: :get,
                            data: {controller: "search-form",
                            turbo_frame: "names",
                            turbo_action: "advance"
                            }
                        ) do |form| %>
                        <div class="bg-(--color-accent) font-semibold py-2 px-4">
                    <%= form.text_field :query, placeholder: "User Search", class: "w-full outline-2 outline-(--color-text) outline-offset-3 focus:outline-(--color-primary)",
                                                data: {action: "input->search-form#search"} %>
            
                </div>
                <% end %>
            </div>    
            <%# ------ /searchbar ------%>
            <%# ------ search results ------%>
            <turbo-frame id="names"
                    class="absolute left-0 mt-2 w-64 bg-[var(--color-background)]
         shadow-lg rounded-md max-h-60 overflow-y-auto z-50">
                <div class="flex gap-4">
                    <% if defined?(@names) %>
            
                        <%= render partial: "profile/name",
                                    collection: @names,
                                    as: :user %>

                    <% end %>
                    </div>
            </turbo-frame>
            <%# ------ /search results ------%>



        </div>
        <% if user_signed_in?%>
        <%# ------ user info ------%>
            <%= link_to profile_path(current_user) do %>
 
                    <div class="flex flex-col">
                        <% if current_user.image.attached? %>
                        <%= image_tag current_user.image.variant(resize_to_fill: [60, 60]).processed, class: "rounded-full" %>
                        <% else %>
                        <%= image_tag("Avatar-Accent.svg") %>
                        <% end %>
                        <div class="text-sm font-semibold flex flex-col items-center">
                            <%= current_user.name %>
                        </div>
                    </div>
                    
            <% end %>
        <%# ------ /user info ------%>
        <div class="flex">
            <%# ------ buttons ------%> 
            
                <%= link_to "Home", root_path,
                                    class: "btn_nav border border-red-500" %>

                <%= link_to "Feed", feed_path,
                                    class: "btn_nav  border border-red-500" %>
 
            <%# ------/ buttons ------%> 
 

        </div>
    
        <% end %>
    </div>
    <div class="flex">
        <%# ------ login/logout ------%>
        <div>
            <% if user_signed_in?%>
                    <%= link_to "Logout", 
                                destroy_user_session_path, 
                                data: { turbo_method: :delete },
                                class: "btn_nav" %>
            <% else %>
                    <%= link_to "Sign In", 
                                new_user_session_path,
                                class: "btn_nav" %>

            <% end %>
        </div>
        <%# ------ /login/logout ------%>
        <%# ------ darkmode toggle ------%>
            <div data-controller="dark-mode">
                <button 
                    data-action="click->dark-mode#toggle"
                    data-dark-mode-target="button" 
                    class="btn_nav">
                </button>
            </div>
        <%# ------ /darkmode toggle ------%>
    </div>
    </div>

</div>